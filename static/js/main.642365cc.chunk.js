(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{35:function(e,t,a){e.exports=a(73)},70:function(e,t){},73:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(32),r=a.n(i),o=a(2),c=a(3),l=a(1),u=a(5),h=a(4),m=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).name="",n}return Object(c.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"Background"},s.a.createElement("h1",null,"The game"),s.a.createElement("label",null,"Please enter your name:"),s.a.createElement("input",{onChange:this.props.setName}),s.a.createElement("button",{onClick:this.props.play},"Continue"))}}]),a}(n.Component),p=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){return Object(o.a)(this,a),t.call(this,e)}return Object(c.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"Background"},this.props.players.map((function(e){return s.a.createElement("div",{key:e.id},e.name,e.gameLeader&&" * GAMELEADER",e.finished&&" FINISHED w/ ".concat(e.speed," WPM"))})))}}]),a}(n.Component),d=a(34),v=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={words:0},n.updateParent=n.updateParent.bind(Object(l.a)(n)),n.disallowMultipleSpace=n.disallowMultipleSpace.bind(Object(l.a)(n)),n}return Object(c.a)(a,[{key:"updateParent",value:function(e){var t=this,a=this.props.excerpt.match(/\S+/g),n=e.target.innerHTML.replace(/&nbsp;/," ").match(/\S+/g),s=Object(d.a)(n);if(n){for(var i=n.length;i>=0;i--){console.log("comparing ",s[i]," to ",a[i]),s[i]!==a[i]&&s.splice(i,1)}this.setState({words:s.length},(function(){return t.props.update(t.state.words)})),console.log("words: ",n.length," excerpt: ",a.length),n.length>a.length&&this.props.finish()}else this.setState({words:0});console.log("excerpt: ",a),console.log(n)}},{key:"disallowMultipleSpace",value:function(e){if(32===e.which&&e.target.innerHTML.endsWith("nbsp;"))return e.preventDefault(),!1}},{key:"render",value:function(){return s.a.createElement("div",{className:"Background"},this.props.excerpt,s.a.createElement("div",{onKeyDown:this.disallowMultipleSpace,onKeyUp:this.updateParent,className:"typebox",contentEditable:"true",style:{backgroundColor:"blue"}}))}}]),a}(n.Component),f=a(33),k=a.n(f);function b(){this.time=0,this.callback=null}b.prototype.start=function(){var e=this;this.interval=setInterval((function(){e.time+=1,e.callback&&e.callback(e.time)}),1e3)},b.prototype.stop=function(){clearInterval(this.interval)},b.prototype.reset=function(){this.time=0},b.prototype.onTick=function(e){this.callback=e};var y=b,g=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).name="",n.timer=new y,n.socket=null,n.state={gameLeader:"",showStart:!1,showWait:!1,start:!1,end:!1,timer:null,time:3,words:0,message:"",players:[],excerpt:""},n.startGame=n.startGame.bind(Object(l.a)(n)),n.startClick=n.startClick.bind(Object(l.a)(n)),n.updateWords=n.updateWords.bind(Object(l.a)(n)),n.stopGame=n.stopGame.bind(Object(l.a)(n)),n.reset=n.reset.bind(Object(l.a)(n)),n}return Object(c.a)(a,[{key:"listenToMessages",value:function(){var e=this;this.socket=k()("https://e39e09819e6e.ngrok.io"),this.socket.emit("join",this.props.name),this.socket.on("start",(function(t){e.setState({excerpt:t}),e.startGame()})),this.socket.on("playerchange",(function(t){var a=JSON.parse(t);console.log(a),e.setState({players:a.players,gameLeader:a.gameLeader},(function(){console.log(e.socket.id),e.state.gameLeader===e.socket.id&&e.setState({showStart:!0})}))})),this.socket.on("gamefinished",(function(){e.gameLeader===e.socket.id&&e.setState({showStart:!0}),e.setState({showWait:!1})}))}},{key:"componentDidMount",value:function(){var e=this;this.listenToMessages(),this.timer.onTick((function(t){e.setState({time:t})}))}},{key:"sendUpdates",value:function(){var e=this;this.interval=setInterval((function(){e.socket.emit("update",{time:e.state.time,words:e.state.words})}),500)}},{key:"startClick",value:function(){this.socket.emit("startgame"),this.setState({showStart:!1})}},{key:"reset",value:function(){this.setState({time:3,start:!1,end:!1,words:0,showReset:!1}),this.timer.reset()}},{key:"startGame",value:function(){var e=this;this.interval=setInterval((function(){e.setState({time:e.state.time-1}),0===e.state.time&&(clearInterval(e.interval),e.setState({start:!0,showStop:!0}),e.timer.start(),e.sendUpdates())}),1e3)}},{key:"isLeader",value:function(){var e=!1;return this.socket&&this.socket.id===this.gameLeader&&(e=!0),e}},{key:"stopGame",value:function(){this.timer.stop(),this.setState({start:!1,end:!0,showStop:!1,showWait:!0}),clearInterval(this.interval),this.socket.emit("playerfinish")}},{key:"updateWords",value:function(e){this.setState({words:e})}},{key:"render",value:function(){return s.a.createElement("div",{className:"Background"},s.a.createElement(p,{players:this.state.players,gameLeader:this.state.gameLeader}),this.state.start?s.a.createElement(v,{update:this.updateWords,finish:this.stopGame,excerpt:this.state.excerpt}):"Loading",s.a.createElement("div",null,"Time: ",this.state.time),s.a.createElement("div",null,"Correct Words: ",this.state.words),s.a.createElement("div",null,"WPM: ",Math.round(60*this.state.words/this.state.time)),this.state.showStart&&s.a.createElement("button",{onClick:this.startClick},"Start Game"),this.state.showWait&&s.a.createElement("div",null,"Please wait for other players to finish."))}}]),a}(n.Component),w=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={play:!1},n.play=n.play.bind(Object(l.a)(n)),n.setName=n.setName.bind(Object(l.a)(n)),n}return Object(c.a)(a,[{key:"play",value:function(){this.setState({play:!0})}},{key:"setName",value:function(e){this.name=e.target.value}},{key:"render",value:function(){return s.a.createElement("div",{className:"App"},this.state.play?s.a.createElement(g,{name:this.name}):s.a.createElement(m,{play:this.play,setName:this.setName}))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[35,1,2]]]);
//# sourceMappingURL=main.642365cc.chunk.js.map